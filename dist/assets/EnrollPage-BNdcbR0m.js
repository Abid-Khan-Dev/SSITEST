import{u as k,d as N,R as d,j as e,S as w,m as r,f as C,B as g}from"./index-DG-IYITZ.js";import{r as S,C as B}from"./courses-Cc4Pwznl.js";import{I as l,a as E}from"./api-DAq57OYT.js";function D(){const c=k(),h=N(),[n,y]=d.useState({name:"",fatherName:"",education:"",address:"",email:"",phoneNO:"",applyFor:"",referredBy:""}),[o,p]=d.useState(h.state?.selectedCourse||""),[m,v]=d.useState(""),[u,f]=d.useState(!1),s=a=>{const{name:i,value:x}=a.target;y({...n,[i]:x})},b=async a=>{if(a.preventDefault(),console.log(a),!o){alert("Please select a course.");return}if(localStorage.getItem("enrollmentData")&&!window.confirm("You have already enrolled. Do you want to overwrite your previous enrollment?"))return;(await E.post("/enroll",{...n,applyFor:o,referredBy:m,terms:u})).status===200&&(alert("Enrollment successful!"),localStorage.setItem("enrollmentData",JSON.stringify({...n,applyFor:o})),c("/"))},t={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6,ease:"easeOut"}}},j={hidden:{},visible:{transition:{staggerChildren:.2}}};return e.jsx(w,{children:e.jsxs("div",{className:"max-w-3xl mx-auto py-16 px-6",children:[e.jsx(r.h1,{className:"text-4xl md:text-5xl font-bold text-gray-900 dark:text-white mb-4",initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.8},children:"Enroll Today"}),e.jsx(r.p,{className:"text-gray-700 dark:text-gray-300 mb-10 text-lg",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:"Fill out the form below to secure your spot in our courses. We'll contact you with the next steps."}),e.jsxs(r.form,{onSubmit:b,className:"bg-gray-100 dark:bg-gray-800 p-8 rounded-xl shadow-md space-y-6",variants:j,initial:"hidden",animate:"visible",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(r.div,{variants:t,children:e.jsx(l,{label:"Name*",placeholder:"Enter your name",value:n.name,name:"name",onChange:s,required:!0})}),e.jsx(r.div,{variants:t,children:e.jsx(l,{label:"Father Name (Optional)",placeholder:"Your father name",value:n.fatherName,name:"fatherName",onChange:s})}),e.jsx(r.div,{variants:t,children:e.jsx(l,{label:"Phone Number*",required:!0,type:"tel",placeholder:"+92 300 1234567",value:n.phoneNO,name:"phoneNO",onChange:s})}),e.jsx(r.div,{variants:t,children:e.jsx(l,{label:"Email (Optional)",type:"email",placeholder:"you@example.com",value:n.email,name:"email",onChange:s})}),e.jsx(r.div,{variants:t,children:e.jsx(l,{label:"Education Background*",required:!0,type:"text",placeholder:"Your education background",value:n.education,name:"education",onChange:s})}),e.jsxs(r.div,{variants:t,children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Referred By"}),e.jsxs("select",{onChange:a=>v(a.target.value),name:"referredBy",defaultValue:m,className:`w-full p-3 rounded-lg border border-gray-300 dark:border-gray-700\r
                                bg-white dark:bg-gray-900 text-gray-900 dark:text-white\r
                                focus:ring-2 focus:ring-sky-400 outline-none`,children:[e.jsx("option",{value:"",children:"Select a Referrer"}),S.map((a,i)=>e.jsx("option",{value:a,children:a},i))]})]})]}),e.jsxs(r.div,{variants:t,children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Address*"}),e.jsx("textarea",{className:`w-full p-3 rounded-lg border border-gray-300 dark:border-gray-700\r
                                bg-white dark:bg-gray-900 text-gray-900 dark:text-white\r
                                focus:ring-2 focus:ring-sky-400 outline-none resize-none`,rows:"3",placeholder:"Your Address*",value:n.address,name:"address",onChange:s,required:!0})]}),e.jsxs(r.div,{variants:t,children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Course Interested*"}),e.jsxs("select",{onChange:a=>p(a.target.value),name:"applyFor",required:!0,defaultValue:o,className:`w-full  p-3 rounded-lg border border-gray-300 dark:border-gray-700\r
                                bg-white dark:bg-gray-900 text-gray-900 dark:text-white\r
                                focus:ring-2 focus:ring-sky-400 outline-none`,children:[e.jsx("option",{value:"",children:"Select a course"}),B.map(a=>e.jsx("option",{value:a.name,children:a.title},a.id))]})]}),e.jsx(r.div,{variants:t,children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"terms",onChange:a=>f(a.target.checked),checked:u,required:!0,className:"mr-2 "}),e.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[" I agree to the ",e.jsx(C,{to:"/terms",className:"text-sky-600 hover:underline ml-1",children:" terms and conditions"}),"."]})]})}),e.jsxs(r.div,{className:"flex flex-wrap gap-4",variants:t,children:[e.jsx(g,{variant:"primary",type:"submit",children:"Submit Enrollment"}),e.jsx(g,{variant:"secondary",onClick:()=>c(-1),children:"Back"})]})]})]})})}export{D as default};
